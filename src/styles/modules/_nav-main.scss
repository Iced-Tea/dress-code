//  ---------------------------------------------------------------------------
//
//  Defines the layout side flyout nav
//
//  ---------------------------------------------------------------------------

$bs-navHeightHuge:3;
$bs-navAccentColor:$bs-orange40;




//  = HEADER
//  ---------------------------------------------------------------------------

.#{$bs-prefix}-p-header
{
	position:relative;
	margin-bottom: $bs-space150;

	a
	{
		color:$bs-text-color;
		transition: color .2s linear, background-color .2s linear;
	}

	#{$bs-prefix}-svg
	{
		transform-origin: 50% 50%;

		&:active
		{
			transform: scale(.85);
		}
	}

	#{$bs-prefix}-svg:hover,
	#{$bs-prefix}-svg:active
	{
		[fill^='#']
		{
			fill:$bs-orange40;
		}

		[stroke^='#']
		{
			stroke:$bs-orange40;
		}
	}
}

.#{$bs-prefix}-p-header--styleguide
{
	position:fixed;
	top:0;
	right:0;
	left:0;
	z-index:999;
}

.touch .#{$bs-prefix}-p-header a:active,
.no-touch .#{$bs-prefix}-p-header a:hover
{
	text-decoration:none;
}



//  = TOP AREA INSIDE HEADER
//  ---------------------------------------------------------------------------

	.#{$bs-prefix}-top-area
	{
		position:relative;
		display: flex;
		justify-content: space-between;
		height: $bs-touch-size;
		background-color:$bs-white;
		border-bottom:1px solid $bs-gray60;

		@include breakpoint($bs-huge-width)
		{
			padding-left: $bs-space100;
		}
	}

	.#{$bs-prefix}-nav-main-toggle
	{
		@include breakpoint($bs-huge-width)
		{
			display:none;
		}
	}

	.#{$bs-prefix}-is-admin .#{$bs-prefix}-l-logo
	{
		display:none;

		@include breakpoint($bs-large-width)
		{
			display:block;
		}
	}

	.#{$bs-prefix}-l-logo
	{
		display:none;
		order: 2;
		flex: 1 0 auto;
		margin: 0 $bs-space100;
		font-size: $bs-font150;
		line-height: $bs-touch-size;
		font-weight:$bs-normal-font-weight;

		#{$bs-prefix}-img { vertical-align:top; }

		@include breakpoint($bs-large-width)
		{
			margin-left: $bs-space100;
		}

		@include breakpoint($bs-huge-width)
		{
			display:block;
			flex-grow: 0;
			margin-left:0;
		}
	}

	.#{$bs-prefix}-logo
	{
		display:inline-block;
		width: 1.8;
		margin: .8 -.4 0 1.2;
		vertical-align: top;

		@include breakpoint($bs-huge-width)
		{
			display:none;

			& + .product
			{
				display:none;
			}
		}
	}

	.#{$bs-prefix}-logo--with-text
	{
		display:none;
		margin-top: $bs-space75;
		margin-left: $bs-space75;
		height: $bs-space100 + .6;

		@include breakpoint($bs-huge-width)
		{
			display:inline-block;
		}
	}

	.#{$bs-prefix}-logo--with-text--brands
	{
		display:inline-block;
	}



//  = BRAND SWITCHER
//  ---------------------------------------------------------------------------

	.#{$bs-prefix}-nav-brand
	{
		order: 3;
		flex: 1 0 auto;
		position:relative;
		// font-size: $bs-font150;
		line-height: $bs-touch-size;
		text-transform: uppercase;
		font-weight: $bs-bold-font-weight;
		text-align: center;
		cursor:default;
		pointer-events:none;

		.#{$bs-prefix}-is-admin &
		{
			cursor:pointer;
			pointer-events:auto;
		}

		@include breakpoint($bs-huge-width)
		{
			// @include order(2);
			flex: 0 0 auto;
			margin-right: $bs-space150;
			font-size: $bs-font100;
		}
	}

	.touch .#{$bs-prefix}-nav-brand:active,
	.no-touch .#{$bs-prefix}-nav-brand:hover
	{
		color:$bs-text-color;

		& .#{$bs-prefix}-nav-brand__inner::after
		{
			opacity:1;
		}
	}

	.touch .#{$bs-prefix}-nav-brand:active,
	.no-touch .#{$bs-prefix}-nav-brand:active
	{
		transform: scale(.85);
	}

	.#{$bs-prefix}-nav-brand__inner
	{
		display:inline-block;
		position: relative;
		line-height: $bs-touch-size;

		&::after
		{
			content:" ";
			position:absolute;
			right:0;
			bottom:1px;
			left: 0;
			height: $bs-space50/2;
			background:$bs-orange40;
			opacity:0;
			transition: opacity .1s linear;
		}
	}



//  = MAIN NAVIGATION ELEMENTS
//  ---------------------------------------------------------------------------

.#{$bs-prefix}-nav-main,
.#{$bs-prefix}-nav-user
{
	position:absolute;
	top:100%;
	right:0;
	left:0;
	z-index:998;
	overflow-x:scroll;
	overflow-y:hidden;
	-webkit-overflow-scrolling:touch;
	border-top:$bs-border50 solid $bs-gray60;
	border-bottom:$bs-border50 solid $bs-gray60;
	transform-origin: 0 0 0;
	transform: scaleY(0);
	background:rgba($bs-white, .85);
	opacity:0;
	pointer-events:none;

	transition: transform .2s .2s ease-in-out, opacity .1s .2s linear;
}

.#{$bs-prefix}-nav-main
{
	order: 2;

	.#{$bs-prefix}-nav-main__items
	{
		transform: translateX(-100%);
		transition: transform .2s ease-in-out, opacity .1s linear;
		opacity:0;
	}

	@include breakpoint($bs-huge-width)
	{
		position:static;
		order: 3;
		flex-grow: 1;
		margin-left: $bs-space100;
		border:0 none;
		overflow-x:hidden;
		transform: scaleY(1);
		opacity:1;
		pointer-events:auto;

		.#{$bs-prefix}-nav-main__items
		{
			transform: translateX(0);
			opacity:1;
		}
	}
}

.#{$bs-prefix}-nav-user
{
	.#{$bs-prefix}-nav-user__items
	{
		float:right;
		margin-right: $bs-space100;
		transform: translateX(100%);
		transition: transform .2s ease-in-out, opacity .1s;
	}

	@include breakpoint($bs-huge-width)
	{
		overflow-x:hidden;
	}
}

.#{$bs-prefix}-nav-main-toggle
{
	order: 1;

	&:hover
	{
		svg
		{
			[fill^='#']
			{
				fill:$bs-orange40;
			}

			[stroke^='#']
			{
				stroke:$bs-orange40;
			}
		}
	}

	&:active
	{
		transform: scale(.85);
	}
}

.#{$bs-prefix}-nav-user-toggle
{
	order: 4;

	#{$bs-prefix}-svg
	{
		vertical-align:middle;
	}

	&:hover
	{
		.#{$bs-prefix}-user-name
		{
			color:$bs-orange40;
		}

		[fill^='#']
		{
			fill:$bs-orange40;
		}

		[stroke^='#']
		{
			stroke:$bs-orange40;
		}
	}

	&:active
	{
		transform: scale(.85);
	}
}

.#{$bs-prefix}-nav-user-toggle--styleguide
{
	visibility:hidden;
}

.#{$bs-prefix}-nav-main--is-shown
{
	.#{$bs-prefix}-nav-main-toggle svg
	{
		[fill^='#']
		{
			fill:$bs-orange40;
		}

		[stroke^='#']
		{
			stroke:$bs-orange40;
		}
	}
}

.#{$bs-prefix}-page--dashboard .nav-user--is-shown
{
	// ~ .nav-user-toggle svg
	// {
	// 	[fill^='#']
	// 	{
	// 		fill:$bs-orange40;
	// 	}
	//
	// 	[stroke^='#']
	// 	{
	// 		stroke:$bs-orange40;
	// 	}
	// }
	//
	// ~ .nav-user-toggle .user-name
	// {
	// 	color:$bs-orange40;
	// }

		li:first-child
		{
			position:relative;

			&::after
			{
				content:" ";
				position:absolute;
				right:0;
				bottom:0;
				left:0;
				height:2px;
				background:$bs-orange40;
			}
		}
}

.#{$bs-prefix}-page--help [href='help.html']
{
	[fill^='#']
	{
		fill:$bs-orange40;
	}

	[stroke^='#']
	{
		stroke:$bs-orange40;
	}
}

.#{$bs-prefix}-link[href='help.html']
{
	margin-left: $bs-space100;
	order: 6;
}

.#{$bs-prefix}-user-name
{
	display:none;

	@include breakpoint($bs-large-width)
	{
		display:inline;
		order: 4;
		line-height: $bs-touch-size;
		margin-left: $bs-space100;
		margin-right: -.6;
	}
}

.#{$bs-prefix}-nav-main--is-shown,
.#{$bs-prefix}-nav-user--is-shown
{
	transition: transform .2s ease-in-out, opacity .1s .1s linear;
	transform: scaleY(1);
	opacity:1;
	pointer-events:auto;

	.#{$bs-prefix}-nav-main__items,
	.#{$bs-prefix}-nav-user__items
	{
	  transition: transform .2s .2s ease-in-out, opacity .1s .2s linear;
		transform: translateX(0);
		opacity:1;
	}
}

.#{$bs-prefix}-nav-main__items,
.#{$bs-prefix}-nav-user__items
{
	height: $bs-touch-size;
	white-space:nowrap;
}

.#{$bs-prefix}-nav-main__items--never-seen,
.#{$bs-prefix}-nav-user__items--never-seen
{
	transform: translateX(-100%);
	transition: transform .6s .1s cubic-bezier(0.055, 0.865, 0.475, 0.990);
}

.#{$bs-prefix}-nav-user__items--never-seen
{
	transform: translateX(100%);
}

.#{$bs-prefix}-nav-main__item,
.#{$bs-prefix}-nav-user__item
{
	display:inline-block;
	margin-left: $bs-space150;

	&:first-child
	{
		margin-left: $bs-space100;
	}

	&:active
	{
		transform: scale(.85);
	}
}

.#{$bs-prefix}-is-admin .#{$bs-prefix}-is-admin-only.#{$bs-prefix}-nav-main__item,
.#{$bs-prefix}-is-admin .#{$bs-prefix}-is-admin-only.#{$bs-prefix}-nav-user__item
{
	display:inline-block!important;
}

.#{$bs-prefix}-nav-main__items,
.#{$bs-prefix}-nav-user__items
{
	margin:0;
	padding:0;
	list-style-type:none;
}

.#{$bs-prefix}-nav-main__link,
.#{$bs-prefix}-nav-user__link
{
	display:block;
	position:relative;
	height: $bs-touch-size;
	line-height: $bs-touch-size;

	&:after
	{
		content:" ";
		position:absolute;
		right:0;
		bottom:0;
		left:0;
		height:$bs-border100;
		background-color:$bs-navAccentColor;
		opacity:0;
		transition: opacity .1s linear;
	}
}

.#{$bs-prefix}-nav-main__link:after
{
	@include breakpoint($bs-huge-width)
	{
		bottom:1px;
	}
}

.touch .#{$bs-prefix}-p-header .#{$bs-prefix}-nav-main__link:active,
.no-touch .#{$bs-prefix}-p-header .#{$bs-prefix}-nav-main__link:hover,
.touch .#{$bs-prefix}-p-header .#{$bs-prefix}-nav-user__link:active,
.no-touch .#{$bs-prefix}-p-header .#{$bs-prefix}-nav-user__link:hover,
.p-header .#{$bs-prefix}-nav-main__link--is-active,
.p-header .#{$bs-prefix}-nav-user__link--is-active
{
	color:$bs-text-color;

	&:after
	{
		opacity:1;
	}
}
